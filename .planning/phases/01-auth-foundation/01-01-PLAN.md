---
phase: 01-auth-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - lib/supabase/client.ts
  - lib/supabase/server.ts
  - lib/supabase/middleware.ts
  - lib/utils.ts
  - components/landing/index.ts
  - components/landing/header.tsx
  - components/landing/hero.tsx
  - components/landing/features.tsx
  - components/landing/how-it-works.tsx
  - components/landing/pricing.tsx
  - components/landing/faq.tsx
  - components/landing/cta.tsx
  - components/landing/footer.tsx
  - components/ui/glow.tsx
  - components/ui/mockup.tsx
  - components/ui/animated-group.tsx
  - components/magicui/animated-gradient-text.tsx
  - app/page.tsx
autonomous: true
user_setup:
  - service: supabase
    why: "Auth and database"
    env_vars:
      - name: NEXT_PUBLIC_SUPABASE_URL
        source: "Supabase Dashboard -> Settings -> API -> Project URL"
      - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
        source: "Supabase Dashboard -> Settings -> API -> anon public key"

must_haves:
  truths:
    - "Landing page displays on localhost:3000 with Hero, Features, HowItWorks, Pricing, FAQ, CTA, Footer sections"
    - "Animations work on page load (blur-slide effect on Hero)"
    - "MagicUI badge with gradient animation is visible in Hero"
    - "Supabase client can be imported from lib/supabase/client"
    - "Supabase server client can be imported from lib/supabase/server"
  artifacts:
    - path: "lib/supabase/client.ts"
      provides: "Browser Supabase client factory"
      exports: ["createClient"]
    - path: "lib/supabase/server.ts"
      provides: "Server Supabase client factory"
      exports: ["createClient"]
    - path: "lib/supabase/middleware.ts"
      provides: "Session update middleware helper"
      exports: ["updateSession"]
    - path: "components/landing/index.ts"
      provides: "Landing component exports"
      exports: ["Header", "Hero", "Features", "HowItWorks", "Pricing", "FAQ", "CTA", "Footer"]
    - path: "app/page.tsx"
      provides: "Landing page composition"
      contains: "Header"
  key_links:
    - from: "app/page.tsx"
      to: "components/landing/*"
      via: "imports"
      pattern: "from.*components/landing"
    - from: "components/landing/hero.tsx"
      to: "components/ui/animated-group.tsx"
      via: "framer-motion AnimatedGroup"
      pattern: "AnimatedGroup"
    - from: "components/landing/hero.tsx"
      to: "components/magicui/animated-gradient-text.tsx"
      via: "MagicUI component"
      pattern: "AnimatedGradientText"
---

<objective>
Set up Supabase authentication infrastructure and migrate the complete landing page from the original project.

Purpose: Establish the foundation for auth (Supabase client utilities) and deliver a polished landing page that showcases the product.

Output:
- Supabase client/server/middleware utilities ready for use
- Full landing page with all sections (Header, Hero, Features, HowItWorks, Pricing, FAQ, CTA, Footer)
- Framer Motion animations working
- MagicUI components (AnimatedGradientText, Glow effects) working
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-auth-foundation/01-CONTEXT.md

**Original project to copy from:**
- Path: C:\Users\Pichau\Desktop\Projetos\Sincron\sincron-grupos
- Landing components: components/landing/ (header, hero, features, how-it-works, pricing, faq, cta, footer)
- Custom UI: components/ui/glow.tsx, components/ui/mockup.tsx, components/ui/animated-group.tsx
- MagicUI: components/magicui/animated-gradient-text.tsx
- Framer Motion for animations

**Current project state:**
- Next.js 16.1.6, React 19.2.3, TypeScript 5
- Shadcn UI components already installed
- No Supabase installed
- No Framer Motion installed
- Landing page is placeholder
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Supabase and Framer Motion dependencies</name>
  <files>package.json</files>
  <action>
    Install required packages via npm:
    - @supabase/ssr (for SSR-compatible Supabase client)
    - @supabase/supabase-js (core Supabase client)
    - framer-motion (for landing page animations)

    Run: `npm install @supabase/ssr @supabase/supabase-js framer-motion`

    DO NOT modify other package.json fields.
  </action>
  <verify>
    Run `npm ls @supabase/ssr @supabase/supabase-js framer-motion` - all should show installed versions without errors.
  </verify>
  <done>
    - @supabase/ssr is in dependencies
    - @supabase/supabase-js is in dependencies
    - framer-motion is in dependencies
    - No npm install errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Supabase client utilities</name>
  <files>
    lib/supabase/client.ts
    lib/supabase/server.ts
    lib/supabase/middleware.ts
  </files>
  <action>
    Create three Supabase utility files following official @supabase/ssr patterns:

    **lib/supabase/client.ts** - Browser client (for client components):
    ```typescript
    import { createBrowserClient } from '@supabase/ssr'

    export function createClient() {
      return createBrowserClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
      )
    }
    ```

    **lib/supabase/server.ts** - Server client (for server components/actions):
    ```typescript
    import { createServerClient } from '@supabase/ssr'
    import { cookies } from 'next/headers'

    export async function createClient() {
      const cookieStore = await cookies()

      return createServerClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
        {
          cookies: {
            getAll() {
              return cookieStore.getAll()
            },
            setAll(cookiesToSet) {
              try {
                cookiesToSet.forEach(({ name, value, options }) =>
                  cookieStore.set(name, value, options)
                )
              } catch {
                // Can be ignored if called from Server Component
              }
            },
          },
        }
      )
    }
    ```

    **lib/supabase/middleware.ts** - Middleware helper for session management:
    ```typescript
    import { createServerClient } from '@supabase/ssr'
    import { NextResponse, type NextRequest } from 'next/server'

    export async function updateSession(request: NextRequest) {
      let supabaseResponse = NextResponse.next({
        request,
      })

      const supabase = createServerClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
        {
          cookies: {
            getAll() {
              return request.cookies.getAll()
            },
            setAll(cookiesToSet) {
              cookiesToSet.forEach(({ name, value }) => request.cookies.set(name, value))
              supabaseResponse = NextResponse.next({
                request,
              })
              cookiesToSet.forEach(({ name, value, options }) =>
                supabaseResponse.cookies.set(name, value, options)
              )
            },
          },
        }
      )

      // Refresh session - do not put code between createServerClient and getUser
      await supabase.auth.getUser()

      return supabaseResponse
    }
    ```

    Create the lib/supabase directory if it doesn't exist.
  </action>
  <verify>
    TypeScript compilation check: `npx tsc --noEmit lib/supabase/*.ts` should have no errors (or run full build).
    Check files exist: lib/supabase/client.ts, lib/supabase/server.ts, lib/supabase/middleware.ts
  </verify>
  <done>
    - lib/supabase/client.ts exports createClient function
    - lib/supabase/server.ts exports async createClient function
    - lib/supabase/middleware.ts exports updateSession function
    - All files use @supabase/ssr patterns (not deprecated @supabase/auth-helpers)
  </done>
</task>

<task type="auto">
  <name>Task 3: Copy landing page components from original project</name>
  <files>
    components/landing/index.ts
    components/landing/header.tsx
    components/landing/hero.tsx
    components/landing/features.tsx
    components/landing/how-it-works.tsx
    components/landing/pricing.tsx
    components/landing/faq.tsx
    components/landing/cta.tsx
    components/landing/footer.tsx
    components/ui/glow.tsx
    components/ui/mockup.tsx
    components/ui/animated-group.tsx
    components/magicui/animated-gradient-text.tsx
    app/page.tsx
  </files>
  <action>
    Copy files EXACTLY from original project at C:\Users\Pichau\Desktop\Projetos\Sincron\sincron-grupos:

    **Step 1: Create directories**
    - components/landing/
    - components/magicui/

    **Step 2: Copy landing components (preserve content exactly)**
    From original: components/landing/*.tsx and components/landing/index.ts
    - header.tsx, hero.tsx, features.tsx, how-it-works.tsx, pricing.tsx, faq.tsx, cta.tsx, footer.tsx, index.ts

    **Step 3: Copy custom UI components needed by landing**
    From original:
    - components/ui/glow.tsx
    - components/ui/mockup.tsx
    - components/ui/animated-group.tsx

    **Step 4: Copy MagicUI components**
    From original:
    - components/magicui/animated-gradient-text.tsx

    **Step 5: Update app/page.tsx to compose landing page**
    ```tsx
    import { Header, Hero, Features, HowItWorks, Pricing, FAQ, CTA, Footer } from "@/components/landing"

    export default function Home() {
      return (
        <div className="min-h-screen">
          <Header />
          <main>
            <Hero />
            <Features />
            <HowItWorks />
            <Pricing />
            <FAQ />
            <CTA />
          </main>
          <Footer />
        </div>
      )
    }
    ```

    **Important notes:**
    - Read each file from original project first, then write to new project
    - Preserve all "use client" directives
    - Preserve all import paths (they should work as @/ paths)
    - If any accordion component is used in FAQ, verify @radix-ui/react-accordion is installed (install if missing)
  </action>
  <verify>
    Run `npm run dev` and visit http://localhost:3000
    - Page should load without errors
    - All sections should be visible when scrolling
    - Animations should work (blur-slide on Hero load)
  </verify>
  <done>
    - Landing page renders with Header, Hero, Features, HowItWorks, Pricing, FAQ, CTA, Footer
    - AnimatedGradientText badge is visible in Hero with gradient animation
    - Glow effects are visible
    - No console errors on page load
    - Page is responsive (check mobile via browser devtools)
  </done>
</task>

</tasks>

<verification>
1. Run `npm run build` - should complete without errors
2. Run `npm run dev` and test:
   - Visit http://localhost:3000 - landing page displays correctly
   - Hero section shows animated badge, title, description, CTA buttons, stats
   - Scroll down to see Features (8 cards), HowItWorks (steps), Pricing, FAQ, CTA, Footer
   - Test responsiveness by resizing browser window
3. Check Supabase utilities exist and export correctly:
   - lib/supabase/client.ts exports createClient
   - lib/supabase/server.ts exports createClient (async)
   - lib/supabase/middleware.ts exports updateSession
</verification>

<success_criteria>
- Supabase packages installed (@supabase/ssr, @supabase/supabase-js)
- Framer Motion installed and used by AnimatedGroup component
- Landing page displays all 8 sections (Header, Hero, Features, HowItWorks, Pricing, FAQ, CTA, Footer)
- Animations work (blur-slide on Hero, scroll animations on Features)
- MagicUI AnimatedGradientText shows gradient animation on badge
- Page is responsive (mobile and desktop layouts)
- No TypeScript errors
- No console errors in browser
</success_criteria>

<output>
After completion, create `.planning/phases/01-auth-foundation/01-01-SUMMARY.md`
</output>
